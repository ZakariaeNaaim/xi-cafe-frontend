<div class="login-container">
  <div class="login-header">
    <h1 class="page-title">{{ 'LOGIN.TITLE' | translate }}</h1>
    @if (loginError()) {
    <div class="general-error">{{ loginError() }}</div>
    }
  </div>

  <div class="login-tile">
    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
      <!-- First Name -->
      <xiwl-input
        [control]="f.firstName"
        [label]="'LOGIN.FIRST_NAME' | translate"
        [placeholder]="'LOGIN.FIRST_NAME' | translate"
        inputId="firstName"
      >
        @if (submitted() && f.firstName.errors?.['required']) {
        <div class="error-text" error>{{ 'LOGIN.ERROR.REQUIRED_FIRST_NAME' | translate }}</div>
        }
      </xiwl-input>

      <!-- Surname -->
      <xiwl-input
        [control]="f.surname"
        [label]="'LOGIN.SURNAME' | translate"
        [placeholder]="'LOGIN.SURNAME' | translate"
        inputId="surname"
      >
        @if (submitted() && f.surname.errors?.['required']) {
        <div class="error-text" error>{{ 'LOGIN.ERROR.REQUIRED_SURNAME' | translate }}</div>
        }
      </xiwl-input>

      <!-- Room Number -->
      <xiwl-input
        [control]="f.roomNumber"
        [label]="'LOGIN.ROOM_NUMBER' | translate"
        [placeholder]="'LOGIN.ROOM_NUMBER' | translate"
        type="number"
        inputId="roomNumber"
      >
        @if (submitted() && f.roomNumber.errors?.['required']) {
        <div class="error-text" error>{{ 'LOGIN.ERROR.REQUIRED_ROOM' | translate }}</div>
        } @else if (submitted() && f.roomNumber.errors?.['pattern']) {
        <div class="error-text" error>{{ 'LOGIN.ERROR.INVALID_ROOM_FORMAT' | translate }}</div>
        } @else if (submitted() && f.roomNumber.errors?.['min']) {
        <div class="error-text" error>{{ 'LOGIN.ERROR.INVALID_ROOM_MIN' | translate }}</div>
        }
      </xiwl-input>

      <!-- Date of Birth -->
      <div class="form-group dob-group">
        <label>{{ 'LOGIN.DATE_OF_BIRTH' | translate }}</label>
        <div class="dob-inputs">
          <input
            type="text"
            formControlName="dobDay"
            [placeholder]="'LOGIN.DAY_PLACEHOLDER' | translate"
            class="dob-day"
            maxlength="2"
          />
          <select formControlName="dobMonth" class="dob-month">
            <option value="" disabled selected>{{ 'LOGIN.MONTH_PLACEHOLDER' | translate }}</option>
            @for (month of constants.MONTHS; track month) {
            <option [value]="month">{{ month }}</option>
            }
          </select>
          <input
            type="text"
            formControlName="dobYear"
            [placeholder]="'LOGIN.YEAR_PLACEHOLDER' | translate"
            class="dob-year"
            maxlength="4"
          />
        </div>
        @if (submitted() && f.dobDay.errors?.['invalidDay']) {
        <div class="error-text">{{ 'LOGIN.ERROR.INVALID_DAY_RANGE' | translate }}</div>
        } @else if (submitted() && (f.dobDay.errors || f.dobMonth.errors || f.dobYear.errors)) {
        <div class="error-text">{{ 'LOGIN.ERROR.INVALID_DOB' | translate }}</div>
        }
      </div>

      <xiwl-button type="submit" customClass="login-btn" [disabled]="isLoading()">
        {{ 'LOGIN.BUTTON' | translate }}
      </xiwl-button>
    </form>
  </div>
</div>
